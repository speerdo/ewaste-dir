---
import { getFeaturedStates } from '../lib/supabase';
import type { State } from '../types/supabase';

const featuredStates = await getFeaturedStates();
---

<section class="relative bg-gradient-to-b from-green-900 to-green-800 py-24 overflow-hidden">
  <!-- Background pattern -->
  <div class="absolute inset-0 opacity-10">
    <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
      <defs>
        <pattern id="grid" width="8" height="8" patternUnits="userSpaceOnUse">
          <path d="M0 0h8v8H0V0z" fill="none" stroke="currentColor" stroke-width="0.5"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#grid)"/>
    </svg>
  </div>

  <div class="container mx-auto px-4 relative z-10">
    <div class="max-w-3xl mx-auto text-center mb-16">
      <h1 class="text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-6">
        Find Electronics Recycling Centers Near You
      </h1>
      <p class="text-lg md:text-xl text-green-100 mb-8">
        Responsibly dispose of your e-waste at certified recycling centers across the United States.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a 
          href="/states" 
          class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-600 hover:bg-green-700 transition-colors"
        >
          Browse by State
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </a>
        <button 
          class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-green-100 bg-green-800 hover:bg-green-700 transition-colors"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
          </svg>
          Find Nearest Center
        </button>
      </div>
    </div>

    <!-- Featured States -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      {featuredStates.map(state => (
        <a 
          href={`/states/${state.id}`} 
          class="group relative rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all"
        >
          <img 
            src={state.image_url} 
            alt={state.name} 
            class="w-full h-48 object-cover transition-transform duration-700 group-hover:scale-110"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"></div>
          <div class="absolute bottom-0 left-0 right-0 p-4">
            <h3 class="text-xl font-bold text-white mb-1">{state.name}</h3>
            <p class="text-sm text-gray-200 line-clamp-2">{state.description}</p>
          </div>
        </a>
      ))}
    </div>
  </div>
</section>

---
import type { CollectionEntry } from 'astro:content';
import Layout from './Layout.astro';

interface Props {
  post: CollectionEntry<'blog'>;
  ogImage?: string;
  description?: string;
}

const { post, ogImage, description } = Astro.props;

// Default description from post data if not provided
const metaDescription = description || post.data.description;
// Default OG image from post data if not provided
const metaImage = ogImage || post.data.image;
---

<Layout 
  title={post.data.title}
  description={metaDescription}
  ogImage={metaImage}
>
  <article class="max-w-4xl mx-auto px-4 py-16">
    <header class="mb-8">
      <h1 class="text-4xl font-bold text-gray-900 mb-4">
        {post.data.title}
      </h1>
      <time 
        datetime={post.data.pubDate.toISOString()}
        class="text-gray-600"
      >
        {post.data.pubDate.toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        })}
      </time>
    </header>
    
    <div class="prose prose-green max-w-none">
      <slot />
    </div>
  </article>
</Layout>

<style>
  :global(.prose h2) {
    @apply text-2xl font-bold text-gray-900 mb-4;
  }

  :global(.prose h3) {
    @apply text-xl font-bold text-gray-900 mb-4;
  }

  :global(.prose h4) {
    @apply text-lg font-bold text-gray-900 mb-4;
  }

  :global(.prose p) {
    @apply text-gray-600 mb-4;
  }

  :global(.prose ul) {
    @apply list-disc list-inside mb-4 text-gray-600;
  }

  :global(.prose ol) {
    @apply list-decimal list-inside mb-4 text-gray-600;
  }

  :global(.prose li) {
    @apply mb-2;
  }
</style>
